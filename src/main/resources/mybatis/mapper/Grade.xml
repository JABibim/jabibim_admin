<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jabibim.admin.mybatis.mapper.GradeMapper">

    <insert id="addGrade">
        INSERT into grade
        (grade_id,
         created_at,
         updated_at,
         deleted_at,
         grade_name,
         discount_rate,
         academy_id)
        VALUES (#{gradeId},
                current_timestamp,
                null,
                null,
                #{gradeName},
                #{discountRate},
                #{academyId})
    </insert>

    <update id="modifyGrade">
        UPDATE grade
        SET
         grade_name = #{gradeName},
         updated_at = current_timestamp,
         discount_rate = #{discountRate}
        WHERE grade_id = #{gradeId}
    </update>

    <select id="getUpdatableGradeList">
        SELECT grade_name
        FROM grade
        WHERE academy_id = #{academyId}
        AND deleted_at IS NOT null;
    </select>
</mapper>